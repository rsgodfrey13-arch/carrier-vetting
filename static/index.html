<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Carrier Shark ‚Äì Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
   
<link rel="stylesheet" href="/static/css/base.css"> 
<link rel="stylesheet" href="/static/css/style1.css"> 
<link rel="stylesheet" href="/static/css/tour.css"> 
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
  
</head>
<body class="carrier-list">
  <div class="bg-gradient"></div>
  <div class="bg-grid"></div>

<div id="site-header"></div>

  

  <div class="page">
    <header class="page-header">
      <div class="page-header-left">
        <!-- <h1 class="page-title">Carrier Shark</h1> -->
        <!-- <p class="page-subtitle">Carrier visibility for modern brokers</p> -->
      </div>
    </header>

    <!-- SEARCH SECTION -->
    <section id="search" class="glass-card search-shell">
      <div class="search-shell-header">
        <div>
          <h2 class="search-title">Search Carriers</h2>
          <p class="search-subtitle">Search by DOT number or carrier name</p>
        </div>
      </div>

<div class="search-row">
  <div class="search-input-wrap">
    <input
      id="search-input"
      class="search-input"
      type="text"
      placeholder="Start typing a DOT, MC, or Carrier Name..."
      autocomplete="off"
    />
    <ul id="carrier-suggestions" class="carrier-suggestions"></ul>
  </div>

  <button id="open-carrier-btn" class="search-btn">Search</button>
</div>


    </section>

    <!-- LIST SECTION -->
    <section id="my-carriers" class="glass-card carriers-card">
      <header class="carriers-card-header">
        <div class="carriers-header-left">
          <h2 class="carriers-title" id="grid-title">My Carriers</h2>
        
          <div class="grid-modebar" id="grid-modebar">
            <span class="grid-modepill" id="grid-modepill">Viewing: My Carriers</span>
            <span class="grid-query" id="grid-query" hidden></span>
            <button class="grid-back" id="grid-back-btn" type="button" hidden>
              Back to My Carriers
            </button>
          </div>
        
          <p class="carriers-subtitle" id="grid-subtitle">
            Click a DOT number to open its profile page.
          </p>
        </div>

      

      
        <div class="carriers-header-actions">
          <button id="filters-btn" class="filters-btn" type="button">
            Filters <span id="filters-count" class="filters-count" hidden>0</span>
          </button>
        
          <button id="bulk-import-btn" class="bulk-import-btn">Bulk Import</button>
          <button id="download-btn" class="download-btn">Download CSV</button>
        
          <!-- ‚úÖ subtle status under buttons, right aligned -->
          <div id="refreshStatus" class="refresh-status" aria-live="polite"></div>
        </div>
        
      </header>
        <!-- Filters popover -->
        <div id="filters-popover" class="filters-popover hidden" role="dialog" aria-modal="false" aria-label="Filters">
          <div class="filters-popover-inner">
            <div class="filters-head">
              <div>
                <div class="filters-title">Filters</div>
                <div class="filters-subtitle">Narrow down your carrier list.</div>
              </div>
              <button id="filters-close" class="filters-close" type="button" aria-label="Close">‚úï</button>
            </div>
        
            <div class="filters-grid">
              <div class="filters-col">
                <label class="f-label">DOT</label>
                <input id="f-dot" class="f-input" type="text" placeholder="e.g. 1234567">
        
                <label class="f-label">MC</label>
                <input id="f-mc" class="f-input" type="text" placeholder="e.g. 123456">
        
                <label class="f-label">City</label>
                <input id="f-city" class="f-input" type="text" placeholder="e.g. Atlanta">
        
                <label class="f-label">State</label>
                <input id="f-state" class="f-input" type="text" placeholder="e.g. GA" maxlength="2">
              </div>
        
              <div class="filters-col">
                <label class="f-label">Authorized</label>
                <select id="f-authorized" class="f-select">
                  <option value="">Any</option>
                  <option value="Y">Yes</option>
                  <option value="N">No</option>
                </select>
        
                <label class="f-label">Common</label>
                <select id="f-common" class="f-select">
                  <option value="">Any</option>
                  <option value="A">Active</option>
                  <option value="I">Inactive</option>
                  <option value="NONE">None</option>
                </select>
        
                <label class="f-label">Broker</label>
                <select id="f-broker" class="f-select">
                  <option value="">Any</option>
                  <option value="A">Active</option>
                  <option value="I">Inactive</option>
                  <option value="NONE">None</option>
                </select>
        
                <label class="f-label">Contract</label>
                <select id="f-contract" class="f-select">
                  <option value="">Any</option>
                  <option value="A">Active</option>
                  <option value="I">Inactive</option>
                  <option value="NONE">None</option>
                </select>
        
                <label class="f-label">Safety Rating</label>
                <select id="f-safety" class="f-select">
                  <option value="">Any</option>
                  <option value="S">Satisfactory</option>
                  <option value="C">Conditional</option>
                  <option value="U">Unsatisfactory</option>
                  <option value="NOT_RATED">Not Rated</option>
                </select>
              </div>
            </div>
        
            <div class="filters-footer">
              <button id="filters-clear" class="btn-ghost" type="button">Clear</button>
              <button id="filters-apply" class="btn-primary" type="button">Apply</button>
            </div>
          </div>
        </div>
      
      <div class="carriers-table-wrap">
        
            <div id="bulk-actions" class="bulk-actions hidden">
              <span id="selected-count">0</span> selected
              <button id="bulk-remove-btn" class="bulk-remove-btn">
                Remove selected from My Carriers
              </button>
            </div>
              
      <table id="carriers-table" class="carriers-table">
        <thead>
          <tr>
            <th class="select-cell">
              <input type="checkbox" id="select-all">
            </th>
        
            <th class="sortable" data-col="dot">
              <span class="th-label">DOT</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
        
            <th class="sortable" data-col="mc">
              <span class="th-label">MC</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
        
            <th class="sortable" data-col="carrier">
              <span class="th-label">Carrier</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
        
            <th class="sortable" data-col="location">
              <span class="th-label">Location</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
        
            <th class="sortable" data-col="operating">
              <span class="th-label">Operating</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
        
            <th class="sortable" data-col="common">
              <span class="th-label">Common</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
        
            <th class="sortable" data-col="contract">
              <span class="th-label">Contract</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
        
            <th class="sortable" data-col="broker">
              <span class="th-label">Broker</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
        
            <th class="sortable" data-col="safety">
              <span class="th-label">Safety Rating</span>
              <span class="sort-icon">
                <span class="arrow-up"></span>
                <span class="arrow-down"></span>
              </span>
            </th>
          </tr>
        </thead>

        <tbody id="carrier-table-body"></tbody>
      </table>

      <!-- üîª New footer: rows-per-page + pagination -->
      <div class="table-footer">
        <div class="rows-per-page">
          Rows per page:
          <select id="rows-per-page">
            <option value="25" selected>25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
      
        <div class="pagination" id="pagination-controls"></div>
      </div>
        <div class="table-tip">
  Tip: Click a column header to sort.
      </div>
    </section>
  </div>

<!-- Bulk Import Modal -->
<div id="import-modal" class="import-modal hidden">
  <div class="import-modal-backdrop" aria-hidden="true"></div>

  <div class="import-modal-dialog glass-card" role="dialog" aria-modal="true" aria-labelledby="import-modal-title">
    <header class="import-modal-header">
      <div>
        <h2 class="import-modal-title" id="import-modal-title">Carrier Import Wizard</h2>
        <p class="import-modal-subtitle">
          Upload a CSV or paste DOTs, then review and confirm before importing.
        </p>
      </div>
      <button class="import-modal-close" id="import-modal-close" type="button" aria-label="Close">‚úï</button>
    </header>

    <div class="import-steps" aria-label="Import steps">
      <div class="import-step import-step-1 import-step-active">
        <span class="import-step-number">1</span><span class="import-step-label">Upload</span>
      </div>
      <div class="import-step import-step-2">
        <span class="import-step-number">2</span><span class="import-step-label">Review</span>
      </div>
      <div class="import-step import-step-3">
        <span class="import-step-number">3</span><span class="import-step-label">Done</span>
      </div>
    </div>

    <!-- STEP 1 -->
    <div class="import-step-body import-step-body-1 active">
      <div class="import-method-toggle">
        <button class="import-method-btn import-method-active" type="button" data-import-method="csv">
          Upload CSV
        </button>
        <button class="import-method-btn" type="button" data-import-method="paste">
          Paste DOT list
        </button>
      </div>

      <div class="import-panels">
        <!-- CSV PANEL -->
        <div id="import-panel-csv" class="import-panel active">
          <div id="csv-dropzone" class="dropzone" role="button" tabindex="0" aria-label="Upload CSV">
            <input id="csv-file-input" type="file" accept=".csv" hidden>
            <div class="dropzone-inner">
              <p class="dropzone-title">Drop your CSV here</p>
              <p class="dropzone-subtitle">or click to browse</p>
              <p class="dropzone-hint">CSV should contain a DOT (or dotnumber) column, or a single column of DOTs.</p>
            </div>
          </div>

          <div class="import-help-row">
            <button id="browse-csv-btn" class="btn-ghost btn-xs" type="button">Choose file‚Ä¶</button>
            <a class="import-sample-link" href="/sample-carrier-import.csv" download>Download sample CSV</a>
          </div>

          <div id="csv-upload-summary" class="csv-upload-summary hidden">
            <span class="csv-upload-title">‚úì CSV loaded <span id="csv-file-name"></span></span>
            <div class="csv-upload-meta">
              <span id="csv-dot-count">0</span> DOTs detected
            </div>
          </div>
        </div>

        <!-- PASTE PANEL -->
        <div id="import-panel-paste" class="import-panel">
          <label class="paste-label" for="dot-paste-textarea">Paste DOT numbers (one per line)</label>
          <textarea
            id="dot-paste-textarea"
            class="paste-textarea"
            rows="8"
            placeholder="517125&#10;97615"
          ></textarea>
          <div class="paste-hint">Tip: you can paste commas/spaces too ‚Äî we‚Äôll extract the numbers.</div>
        </div>
      </div>

      <!-- Optional: a lightweight validation note area your JS can use -->
      <div id="import-upload-note" class="import-empty" style="display:none;"></div>
    </div>

    <!-- STEP 2 (REVIEW) -->
    <div class="import-step-body import-step-body-2">
      <div class="import-summary" id="import-summary">
        <div class="summary-pill summary-new">
          <span>New</span>
          <span class="summary-count" id="summary-new-count">0</span>
        </div>
        <div class="summary-pill summary-dup">
          <span>Duplicates</span>
          <span class="summary-count" id="summary-dup-count">0</span>
        </div>
        <div class="summary-pill summary-invalid">
          <span>Invalid</span>
          <span class="summary-count" id="summary-invalid-count">0</span>
        </div>
      </div>

      <div id="import-loading" class="import-loading hidden">
        <div class="spinner" aria-hidden="true"></div>
        Validating and preparing your import‚Ä¶
        <div class="import-loading-sub">This may take a few seconds for large lists.</div>
      </div>

      <div id="import-results" class="import-results hidden">
        <!-- New -->
        <div class="import-section" data-section="new">
          <button class="import-section-header" type="button">
            <div>
              <span class="import-section-title">New DOTs</span>
              <span class="import-section-count">(<span id="new-count">0</span>)</span>
            </div>
            <span class="import-section-toggle">‚ñæ</span>
          </button>
          <div class="import-section-body">
            <table class="import-results-table">
              <thead>
                <tr>
                  <th>DOT</th>
                  <th>Carrier</th>
                  <th>Notes</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="import-new-tbody"></tbody>
            </table>
            <div class="import-empty hidden" id="import-new-empty">No new DOTs found.</div>
          </div>
        </div>

        <!-- Duplicates -->
        <div class="import-section collapsed" data-section="duplicate">
          <button class="import-section-header" type="button">
            <div>
              <span class="import-section-title">Duplicates (already in My Carriers)</span>
              <span class="import-section-count">(<span id="dup-count">0</span>)</span>
            </div>
            <span class="import-section-toggle">‚ñæ</span>
          </button>
          <div class="import-section-body">
            <table class="import-results-table">
              <thead>
                <tr>
                  <th>DOT</th>
                  <th>Carrier</th>
                  <th>Notes</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="import-dup-tbody"></tbody>
            </table>
            <div class="import-empty hidden" id="import-dup-empty">No duplicates.</div>
          </div>
        </div>

        <!-- Invalid -->
        <div class="import-section collapsed" data-section="invalid">
          <button class="import-section-header" type="button">
            <div>
              <span class="import-section-title">Invalid</span>
              <span class="import-section-count">(<span id="invalid-count">0</span>)</span>
            </div>
            <span class="import-section-toggle">‚ñæ</span>
          </button>
          <div class="import-section-body">
            <table class="import-results-table">
              <thead>
                <tr>
                  <th>Value</th>
                  <th>Reason</th>
                  <th>Notes</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="import-invalid-tbody"></tbody>
            </table>
            <div class="import-empty hidden" id="import-invalid-empty">No invalid rows.</div>
          </div>
        </div>

        <div class="table-tip" style="margin-top:10px;">
          Tip: Only <b>New DOTs</b> will be imported when you click ‚ÄúNext‚Äù.
        </div>
      </div>
    </div>

    <!-- STEP 3 (DONE) -->
    <div class="import-step-body import-step-body-3">
      <div class="import-done-icon">‚úÖ</div>
      <div class="import-done-title">Import complete</div>
      <div class="import-done-subtitle">Your carrier list has been updated.</div>

      <div class="import-done-stats">
        <div class="done-stat">
          <span class="done-label">Imported</span>
          <span class="done-value" id="done-imported-count">0</span>
        </div>
        <div class="done-stat">
          <span class="done-label">Duplicates</span>
          <span class="done-value" id="done-dup-count">0</span>
        </div>
        <div class="done-stat">
          <span class="done-label">Invalid</span>
          <span class="done-value" id="done-invalid-count">0</span>
        </div>
      </div>

      <div class="import-empty" style="margin-top:12px;">
        You can close this modal or import another list.
      </div>
    </div>

    <footer class="import-modal-footer">
      <button id="import-back-btn" class="btn-ghost" type="button">Back</button>
      <button id="import-cancel-btn" class="btn-ghost" type="button">Cancel</button>
      <button id="import-next-btn" class="btn-primary" type="button">Next</button>
    </footer>
  </div>
</div>

  
<!-- TOUR MODAL (put near end of body) -->
<div class="cs-modal-overlay" id="tourOverlay" aria-hidden="true">
  <div class="cs-modal" role="dialog" aria-modal="true" aria-labelledby="tourTitle">
    <button class="cs-modal-x" id="tourClose" aria-label="Close">‚úï</button>

  <!-- ‚úÖ Slide 0 logo badge -->
  <div class="cs-tour-intro-badge" aria-hidden="true">
    <img src="/images/white-c-teal-shark-white-text-on-right-condensed.svg"
         alt=""
         class="cs-tour-logo">
  </div>
    
    
    <div class="cs-tour">
    <div class="cs-tour-media">
      <img id="tourImg" src="/static/help-art/image.png" alt="" />
    </div>

      <div class="cs-tour-content">

        
        <div class="cs-tour-kicker">PLATFORM OVERVIEW</div>
        <h2 class="cs-tour-title" id="tourTitle"></h2>
        <div class="cs-tour-body" id="tourBody"></div>

<div class="cs-tour-controls">
  <label class="cs-tour-dontshow">
    <input type="checkbox" id="tourDontShow" />
    Don‚Äôt show again
  </label>

  <div class="cs-tour-footer">
    <div class="cs-tour-dots" id="tourDots"></div>

    <div class="cs-tour-actions">
      <button class="cs-btn cs-btn-ghost" id="tourPrev" type="button">Back</button>

      <button class="cs-btn cs-btn-primary" id="tourNext" type="button">Next</button>
      
      <!-- keep your tourGo button here if you‚Äôre using it -->
      <button class="cs-btn cs-btn-secondary-muted" id="tourGo" type="button" style="display:none;">
        Continue to Carrier Shark
      </button>


    </div>
  </div>

  <a href="#" class="cs-tour-link" id="tourSkip">Skip Tour</a>
</div>
      </div>
    </div>
  </div>
</div>

<footer id="site-footer"></footer>



  <!-- 1. Load Sentry library -->
  <script
    src="https://js.sentry-cdn.com/1df77c56ba17c2098baf02e362c93be2.min.js"
    crossorigin="anonymous"
  ></script>
  
  <!-- 2. Initialize Sentry with YOUR DSN -->
  <script src="/js/shared/sentry.js"></script>
  
  <!-- 3. Your existing shared code -->
  <script src="/js/shared/shared.js"></script>
    <script src="/js/pages/tour.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  
<script src="/js/pages/index.js" defer></script>

</body>
</html>
