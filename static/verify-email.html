<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carrier Shark — Verify Email</title>

  <link rel="stylesheet" href="/static/css/base.css" />
  <link rel="stylesheet" href="/static/css/style1.css" />
  <link rel="stylesheet" href="/static/css/signup.css" />
  <style>
  /* Clean state for status pages */
  .auth-hero.is-clean {
    padding-top: 34px;
    padding-bottom: 0;
  }
  .auth-hero.is-clean #verify-subtitle.auth-title {
    margin-top: 12px;
    line-height: 1.12;
    letter-spacing: -0.02em;
  }
  .auth-hero.is-clean #continue-btn {
    margin-top: 22px !important;
  }
</style>
<style>
  /* Verified success state polish */
  .auth-hero.is-verified {
    padding-top: 42px;
  }

  #verify-success-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 12px;
  }

  .auth-hero.is-verified #verify-subtitle.auth-title {
    margin-top: 10px;
    line-height: 1.15;
    letter-spacing: -0.015em;
  }

  .auth-hero.is-verified #continue-btn {
    margin-top: 26px;
    min-width: 260px;
    justify-content: center;
  }
</style>

</head>

<body class="auth-page">
  <div class="bg-gradient"></div>
  <div class="bg-grid"></div>
  <div id="site-header" data-header="slim"></div>

  <main class="page">
    <section class="auth-shell">
      <div class="auth-hero">
        <span class="auth-eyebrow">Email verification</span>
        <h1 id="verify-title" class="auth-title">Verify your email to continue.</h1>
        <div id="verify-success-block">
        <p id="verify-subtitle" class="auth-subtitle">
          We sent a verification link to your inbox. Open it to unlock plan activation.
        </p>
      
        <a id="continue-btn"
           class="cs-btn cs-btn-primary"
           href="/activate-plan"
           style="display:none;">
          Continue to choose your plan
        </a>
          <p class="cs-help" style="margin-top:8px;">
            You’re all set. Plan activation takes less than a minute.
          </p>
      </div>

      <div id="verify-card" class="auth-card">
        <div class="auth-card-inner">
          <div class="verify-box">
            <div class="verify-icon" aria-hidden="true">✉️</div>
            <p class="cs-help" style="margin:0;">
              If you don’t see it, check spam or resend.
            </p>
          </div>

          <div class="cs-row cs-row-right" style="margin-top:14px;">
            <form method="post" action="/api/auth/resend-verification" style="margin:0;">
              <input type="hidden" name="email" value="" />
              <button class="cs-btn cs-btn-primary" type="submit">Resend email</button>
            </form>


            <a class="cs-btn cs-btn-ghost" href="/create-account">Change email</a>
          </div>

          <div class="cs-fineprint" style="margin-top:12px;">
            <span><a href="/support">Need help?</a></span>
            <span><a href="/privacy">Privacy</a></span>
          </div>
        </div>
      </div>
    </section>
  </main>
  <script src="/js/shared/shared.js"></script>

<script>
(function () {
  const params = new URLSearchParams(window.location.search);
  const status = params.get("status");

  const hero = document.querySelector(".auth-hero");
  const title = document.getElementById("verify-title");
  const subtitle = document.getElementById("verify-subtitle");
  const continueBtn = document.getElementById("continue-btn");
  const card = document.getElementById("verify-card");

  if (!subtitle) return;

  // Default (no status): normal waiting page
  const isStatusPage = ["verified", "wait", "error"].includes(status);

  if (!isStatusPage) {
    // normal /verify-email
    if (continueBtn) continueBtn.style.display = "none";
    if (card) card.style.display = "";
    if (title) title.style.display = "";
    subtitle.classList.remove("auth-title");
    subtitle.classList.add("auth-subtitle");
    return;
  }

  // Clean mode for ANY status page
  if (hero) hero.classList.add("is-clean");
  if (title) title.style.display = "none";
  if (card) card.style.display = "none";

  // Make subtitle act like the title (big + clean)
  subtitle.classList.add("auth-title");
  subtitle.classList.remove("auth-subtitle");

  // Status copy + button behavior
  if (status === "verified") {
    subtitle.textContent = "Email verified successfully.";
    // enable verified hero mode
    const hero = document.querySelector(".auth-hero");
    if (hero) hero.classList.add("is-verified");
    
    // show button
    if (continueBtn) {
      continueBtn.style.display = "inline-flex";
    }
  }

  // Not verified statuses: hide continue button
  if (continueBtn) continueBtn.style.display = "none";

  if (status === "invalid") {
    subtitle.textContent = "That verification link is invalid or expired.";
    return;
  }

  if (status === "sent") {
    subtitle.textContent = "Verification email resent. Check your inbox.";
    return;
  }

  if (status === "wait") {
    subtitle.textContent = "Please wait a moment before resending another email.";
    return;
  }

  // error
  subtitle.textContent = "Something went wrong. Please try resending the email.";
})();
</script>

  </body>
</html>
