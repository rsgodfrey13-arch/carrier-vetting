<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carrier Shark — Verify Email</title>

  <link rel="stylesheet" href="/static/css/base.css" />
  <link rel="stylesheet" href="/static/css/style1.css" />
  <link rel="stylesheet" href="/static/css/signup.css" />
  <style>
  /* Clean state for status pages */
  .auth-hero.is-clean {
    padding-top: 34px;
    padding-bottom: 0;
  }
  .auth-hero.is-clean #verify-subtitle.auth-title {
    margin-top: 12px;
    line-height: 1.12;
    letter-spacing: -0.02em;
  }
  .auth-hero.is-clean #continue-btn {
    margin-top: 22px !important;
  }
</style>
<style>
  /* Verified success state polish */
  .auth-hero.is-verified {
    padding-top: 42px;
  }

  #verify-success-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 12px;
  }

  .auth-hero.is-verified #verify-subtitle.auth-title {
    margin-top: 10px;
    line-height: 1.15;
    letter-spacing: -0.015em;
  }

  .auth-hero.is-verified #continue-btn {
    margin-top: 26px;
    min-width: 260px;
    justify-content: center;
  }
</style>

</head>

<body class="auth-page">
  <div class="bg-gradient"></div>
  <div class="bg-grid"></div>
  <div id="site-header" data-header="slim"></div>

  <main class="page">
    <section class="auth-shell">
      <div class="auth-hero">
        <span class="auth-eyebrow">Email verification</span>
        <h1 id="verify-title" class="auth-title">Verify your email to continue.</h1>
        <div id="verify-success-block">
        <p id="verify-subtitle" class="auth-subtitle">
          We sent a verification link to your inbox. Open it to unlock plan activation.
        </p>
      
        <a id="continue-btn"
           class="cs-btn cs-btn-primary"
           href="/activate-plan"
           style="display:none;">
          Continue to choose your plan
        </a>
          <p class="cs-help" style="margin-top:8px; display:none;">
            You’re all set. Plan activation takes less than a minute.
          </p>
      </div>

      <div id="verify-card" class="auth-card">
        <div class="auth-card-inner">
          <div id="verify-box" class="verify-box">
            <div class="verify-icon" aria-hidden="true">✉️</div>
            <p class="cs-help" style="margin:0;">
              If you don’t see it, check spam or resend.
            </p>
          </div>

          <div class="cs-row cs-row-center" style="margin-top:14px;">
            <form method="post" action="/api/auth/resend-verification" style="margin:0;">
              <input type="hidden" name="email" value="" />
              <button class="cs-btn cs-btn-primary" type="submit">Resend email</button>
            </form>


          </div>

          <div class="cs-fineprint" style="margin-top:12px;">
            <span><a href="/support">Need help?</a></span>
          </div>
        </div>
      </div>
    </section>
  </main>
  <script src="/js/shared/shared.js"></script>

<script>
(function () {
  const params = new URLSearchParams(window.location.search);
  const status = params.get("status");
const verifyBox = document.getElementById("verify-box");

  const hero = document.querySelector(".auth-hero");
  const title = document.getElementById("verify-title");
  const subtitle = document.getElementById("verify-subtitle");
  const continueBtn = document.getElementById("continue-btn");
  const card = document.getElementById("verify-card");
  const helpLine = document.querySelector("#verify-success-block .cs-help");

  if (!subtitle) return;

  // Helper functions
  function setNormalMode() {
    if (hero) hero.classList.remove("is-clean", "is-verified");
    if (title) title.style.display = "";
    if (card) card.style.display = "";
    if (continueBtn) continueBtn.style.display = "none";
    if (helpLine) helpLine.style.display = "none";
    if (verifyBox) verifyBox.style.display = "";
    subtitle.classList.remove("auth-title");
    subtitle.classList.add("auth-subtitle");
    subtitle.textContent =
      "We sent a verification link to your inbox. Open it to unlock plan activation.";
  }

  function setStatusMode({ showCard }) {
    if (hero) hero.classList.add("is-clean");
    if (title) title.style.display = "none";
    if (continueBtn) continueBtn.style.display = "none";
    if (helpLine) helpLine.style.display = "none";
    if (verifyBox) verifyBox.style.display = showCard ? "none" : "none";
    subtitle.classList.add("auth-title");
    subtitle.classList.remove("auth-subtitle");

    if (card) card.style.display = showCard ? "" : "none";
  }

  // No status -> normal page
  if (!status) {
    setNormalMode();
    return;
  }

  // VERIFIED (clean, no card, show continue)
  if (status === "verified") {
    setStatusMode({ showCard: false });
    subtitle.textContent = "Email verified successfully.";
    if (hero) hero.classList.add("is-verified");
    if (continueBtn) continueBtn.style.display = "inline-flex";
    if (helpLine) helpLine.style.display = "";
    return;
  }

if (status === "invalid") {
  setStatusMode({ showCard: true });
  subtitle.textContent = "That verification link is invalid or expired. Resend a new one below.";
  if (verifyBox) verifyBox.style.display = "none";
  return;
}

if (status === "sent") {
  setStatusMode({ showCard: true });
  subtitle.textContent = "Verification email resent. If you don’t see it, resend again below.";
  if (verifyBox) verifyBox.style.display = "none";
  return;
}


  // WAIT (clean, no card)
  if (status === "wait") {
    setStatusMode({ showCard: false });
    subtitle.textContent = "Please wait a moment before resending another email.";
    return;
  }

  // ERROR (clean, no card)
  if (status === "error") {
    setStatusMode({ showCard: false });
    subtitle.textContent = "Something went wrong. Please try again in a moment.";
    return;
  }

  // Unknown status -> fallback
  setNormalMode();
})();
</script>


  </body>
</html>
